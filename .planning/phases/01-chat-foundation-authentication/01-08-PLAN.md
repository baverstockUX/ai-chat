---
phase: 01-chat-foundation-authentication
plan: 08
type: execute
wave: 4
depends_on: ["01-07"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User can send message and receive streaming AI response within 2 seconds"
    - "User creates multiple conversations, switches between them, and history persists across browser restarts"
    - "AI response with code block displays with syntax highlighting and functional copy button"
    - "User logs out and back in, sees their conversations intact"
    - "Two different users log in and see completely isolated conversation data"
  artifacts: []
  key_links: []
---

<objective>
Human verification of complete Phase 1 implementation against all requirements and success criteria. Test end-to-end user flows, cross-browser compatibility, and visual polish.

Purpose: Validate that all 15 requirements (CHAT-01 to CHAT-10, AUTH-01 to AUTH-05) are fully implemented and working as specified.

Output: Confirmation that Phase 1 is complete and ready for Phase 2, or identified gaps requiring fixes.
</objective>

<execution_context>
@/Users/christian.baverstock/.claude/get-shit-done/workflows/execute-plan.md
@/Users/christian.baverstock/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@/Users/christian.baverstock/code/ai-chat/.planning/PROJECT.md
@/Users/christian.baverstock/code/ai-chat/.planning/ROADMAP.md
@/Users/christian.baverstock/code/ai-chat/.planning/phases/01-chat-foundation-authentication/01-CONTEXT.md
@/Users/christian.baverstock/code/ai-chat/.planning/ROADMAP.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete Phase 1 implementation:
- Next.js project with Tailwind CSS and TypeScript
- PostgreSQL database with Drizzle ORM (users, conversations, messages)
- NextAuth authentication with credentials provider
- Streaming AI chat using Vercel AI SDK + Google Gemini
- Chat UI with message display, markdown rendering, syntax highlighting
- Collapsible sidebar with conversation list, search, and pinning
- Keyboard shortcuts and command palette
- Mobile-optimized UI with touch interactions
- Logout functionality
  </what-built>
  <how-to-verify>
**Setup Verification:**
1. Check `.env.local` has DATABASE_URL, GOOGLE_API_KEY (or GEMINI_KEY), AUTH_SECRET
2. Run `npm install` - should complete without errors
3. Run `npm run db:push` - should create tables in database
4. Run `npm run dev` - server starts on http://localhost:3000

**Authentication Tests (AUTH-01 to AUTH-05):**
5. Visit http://localhost:3000 - redirects to /login
6. Register new account (email: test1@example.com, password: test1234)
   - Should redirect to chat interface after registration
7. Logout using logout button
   - Should redirect to /login
8. Login with same credentials
   - Should successfully authenticate and show chat interface
9. Try login with wrong password
   - Should show error message "Invalid email or password"
10. Refresh browser multiple times
    - Session should persist (remain logged in)
11. Close browser completely, reopen, visit site
    - Session should still persist (AUTH-03: remember me)

**Chat Functionality Tests (CHAT-01 to CHAT-04):**
12. Send message "Hello, how are you?"
    - Typing indicator should appear immediately
    - AI response should start streaming within 2 seconds
    - Response should stream word-by-word (not appear all at once)
13. Send message "Show me a Python hello world example"
    - Code block should render with syntax highlighting
    - Copy button should appear on code block
    - Click copy button - should show success toast
    - Paste - should have copied code correctly
14. Send message "Show me a **bold**, *italic*, and a list:\n- item 1\n- item 2"
    - Markdown should render correctly (bold, italic, list)
15. Check message display:
    - User messages appear right-aligned with distinct color
    - AI messages appear left-aligned with different color
    - Both show avatars (user on right, AI on left)
    - Timestamps display on messages
    - Hover over message - action buttons appear (copy, edit, delete)

**Conversation Management Tests (CHAT-05 to CHAT-10):**
16. Click "New Conversation" button
    - Should create new conversation and navigate to it
    - First message should auto-generate conversation title
17. Create 3 different conversations with different messages
18. Check sidebar shows all conversations in chronological order
19. Click on different conversation
    - Should switch to that conversation
    - Message history should load correctly
20. Pin a conversation
    - Should move to "Pinned" section at top of sidebar
21. Unpin conversation
    - Should return to "Recent" section
22. Rename a conversation
    - Click rename button on conversation
    - Enter new title
    - Should update in sidebar
23. Search for conversation by title
    - Type in search box
    - Should filter conversations in real-time
24. Search for text from a message
    - Should find conversation containing that text
25. Clear search
    - All conversations should reappear
26. Delete a conversation
    - Click delete button
    - Confirmation dialog should appear
    - Confirm deletion
    - Conversation should be removed
    - Trying to access deleted conversation URL should show 404
27. Refresh browser
    - All conversations should persist
28. Close browser, reopen, login
    - All conversations should still exist (CHAT-09: cross-session persistence)

**Keyboard Shortcuts Tests:**
29. Press Cmd/Ctrl + K
    - Command palette should open
30. Type "new" in command palette
    - Should show "New Conversation" action
31. Press Cmd/Ctrl + N
    - Should create new conversation
32. Press Cmd/Ctrl + F
    - Should focus search input in sidebar
33. Press Cmd/Ctrl + B
    - Should collapse/expand sidebar
34. Press Esc
    - Should close any open dialogs or command palette

**Mobile UI Tests:**
35. Resize browser to mobile width (< 768px)
    - Sidebar should become overlay (not fixed)
    - Mobile header should appear with menu button
    - Touch targets should be larger
36. Click menu button on mobile
    - Sidebar should slide in as full-screen overlay
37. Tap outside sidebar on mobile
    - Sidebar should close
38. Check message input on mobile
    - Send button should be appropriately sized for touch

**User Isolation Tests (AUTH-04):**
39. Logout from test1@example.com
40. Register second account (test2@example.com)
41. Create a conversation as test2
42. Logout and login as test1
    - Should NOT see test2's conversations
    - Only see test1's conversations
43. Try to access test2's conversation URL directly
    - Should return 404 or unauthorized (data isolation working)

**Performance Tests:**
44. Send a message and measure time to first response
    - Should be within 2 seconds (success criteria 1)
45. Create 20+ conversations
    - Sidebar should remain performant
    - Search should still be fast
46. Scroll through long conversation
    - Should be smooth, no jank

**Visual Polish:**
47. Check overall aesthetic
    - Professional and clean (user requirement)
    - Not cluttered (user requirement)
    - Consistent spacing and alignment
48. Check color contrast (accessibility)
    - Text should be readable
    - Buttons should have clear visual states
49. Test in different browsers (Chrome, Firefox, Safari)
    - Should work consistently across browsers

**Report any issues found:**
- Missing functionality
- Visual bugs
- Performance problems
- Unexpected behavior
- Accessibility issues
  </how-to-verify>
  <resume-signal>
Reply with one of:
- "approved" - everything works as expected, Phase 1 complete
- "issues: [list]" - describe any problems found that need fixing
- "minor-polish: [list]" - minor improvements that could be made but not blocking
  </resume-signal>
</task>

</tasks>

<verification>
All 15 Phase 1 requirements satisfied:
- CHAT-01: Send messages, receive streaming responses ✓
- CHAT-02: Conversation history in message bubbles ✓
- CHAT-03: Markdown rendering ✓
- CHAT-04: Code blocks with syntax highlighting and copy button ✓
- CHAT-05: Create new conversations ✓
- CHAT-06: View conversation list in sidebar ✓
- CHAT-07: Rename conversations ✓
- CHAT-08: Delete conversations ✓
- CHAT-09: Persistence across browser sessions ✓
- CHAT-10: Search conversations by name or content ✓
- AUTH-01: Create account ✓
- AUTH-02: Login ✓
- AUTH-03: Session persistence ✓
- AUTH-04: Isolated user data ✓
- AUTH-05: Logout ✓

All 5 success criteria from roadmap satisfied:
1. User sends message and receives streaming AI response within 2 seconds ✓
2. User creates multiple conversations, switches between them, and history persists across browser restarts ✓
3. AI response with code block displays with syntax highlighting and functional copy button ✓
4. User logs out and back in, sees their conversations intact ✓
5. Two different users log in and see completely isolated conversation data ✓
</verification>

<success_criteria>
- All authentication flows work correctly
- Streaming responses appear within 2 seconds
- Markdown and code rendering works perfectly
- Conversation management (create, rename, delete, search) functions as expected
- Sidebar and mobile UI work correctly
- Keyboard shortcuts provide power user functionality
- Data isolation between users is enforced
- All user decisions from CONTEXT.md are implemented
- Visual polish matches "professional, clean" requirement
</success_criteria>

<output>
After human verification approval, create `.planning/phases/01-chat-foundation-authentication/01-08-SUMMARY.md` documenting:
- Verification results (all tests passed or issues found)
- Any minor polish items noted but not blocking
- Performance observations
- Browser compatibility notes
- Overall Phase 1 completion status
- Recommendations for Phase 2 preparation
</output>
